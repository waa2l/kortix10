# Smart Medical Queue Management System (QMS)

نظام إدارة الطوابير الطبية الذكي - نظام متكامل لإدارة الطوابير في المراكز الطبية مع دعم كامل للغة العربية والنطق الصوتي.

## المميزات الرئيسية

✅ **إدارة الطوابير الذكية** - نظام متقدم لإدارة الطوابير في الوقت الفعلي
✅ **دعم كامل للعربية** - واجهة عربية RTL مع خط Cairo
✅ **النطق الصوتي** - نطق عربي للنداءات والإعلانات
✅ **شاشات عرض متعددة** - دعم عدة شاشات عرض في نفس الوقت
✅ **Realtime Updates** - تحديثات فورية باستخدام Supabase Realtime
✅ **إدارة الأطباء** - نظام متكامل لإدارة بيانات الأطباء والحضور
✅ **الاستشارات الطبية** - نظام استشارات طبية مع تتبع الحالات
✅ **حجز المواعيد** - نظام حجز مواعيد متقدم
✅ **حاسبات طبية** - أدوات طبية مهمة (BMI، موعد الولادة، إلخ)
✅ **الشكاوى والاقتراحات** - نظام متكامل للشكاوى والاقتراحات

## المتطلبات

- Node.js 18+ 
- npm أو yarn
- حساب Supabase
- متصفح حديث يدعم Web Audio API

## التثبيت

### 1. استنساخ المشروع

```bash
cd qms
```

### 2. تثبيت المكتبات

```bash
npm install --legacy-peer-deps
```

### 3. إعداد Supabase

1. انشئ حساب على [Supabase](https://supabase.com)
2. انشئ مشروع جديد
3. انسخ SQL من ملف `database-schema.sql` إلى SQL Editor في Supabase
4. نسخ بيانات الاتصال:
   - `NEXT_PUBLIC_SUPABASE_URL`
   - `NEXT_PUBLIC_SUPABASE_ANON_KEY`

### 4. إعداد متغيرات البيئة

أنشئ ملف `.env.local`:

```env
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
NEXT_PUBLIC_APP_NAME=Smart Medical Queue Management System
NEXT_PUBLIC_APP_VERSION=1.0.0
NEXT_PUBLIC_AUDIO_PATH=/audio
NEXT_PUBLIC_SPEECH_RATE=1
NEXT_PUBLIC_API_URL=http://localhost:3000/api
```

### 5. إعداد ملفات الصوت

أنشئ مجلد `public/audio` وأضف الملفات الصوتية:

```
public/audio/
├── ding.mp3                    # صوت التنبيه
├── 1.mp3 إلى 200.mp3          # أرقام العملاء
├── clinic1.mp3 إلى clinic10.mp3 # أسماء العيادات
└── instant1.mp3 إلى instant10.mp3 # رسائل فورية
```

### 6. تشغيل المشروع

```bash
npm run dev
```

الموقع سيكون متاحاً على: `http://localhost:3000`

## الصفحات الرئيسية

### 1. الصفحة الرئيسية (`/`)
لوحة التحكم الرئيسية مع روابط لجميع الأقسام

### 2. الإدارة (`/admin`)
- **دخول الإدارة** (`/admin/login`) - تسجيل دخول الإدارة
- **لوحة التحكم** (`/admin/dashboard`) - لوحة التحكم الرئيسية
- **الإعدادات العامة** (`/admin/settings/general`) - إعدادات المركز
- **إدارة الشاشات** (`/admin/settings/screens`) - إضافة وتعديل الشاشات
- **إدارة العيادات** (`/admin/settings/clinics`) - إضافة وتعديل العيادات
- **إعدادات النداء** (`/admin/settings/calls`) - إعدادات النداء والإعلانات
- **إدارة الأطباء** (`/admin/settings/doctors`) - إدارة بيانات الأطباء
- **الشكاوى والاقتراحات** (`/admin/settings/complaints`) - عرض والرد على الشكاوى

### 3. شاشة العرض (`/display`)
عرض الطوابير والإعلانات على الشاشات الكبيرة

### 4. لوحة التحكم (`/control`)
التحكم في الطوابير والنداءات

### 5. الطباعة (`/print`)
طباعة التذاكر والتقارير

### 6. صفحة العميل (`/patient`)
- دخول العميل من QR Code
- تتبع الطابور
- تقديم الشكاوى والاقتراحات

### 7. حجز الموعد (`/appointment`)
حجز موعد جديد في العيادة

### 8. الأطباء (`/doctor`)
- **دخول الأطباء** (`/doctor/login`) - تسجيل دخول الطبيب
- **لوحة تحكم الطبيب** (`/doctor/dashboard`) - بيانات الطبيب والحضور
- **الاستشارات** (`/doctor/consultations`) - عرض والرد على الاستشارات

### 9. الاستشارات (`/consultation`)
- **تسجيل استشارة** (`/consultation/register`) - تسجيل استشارة جديدة
- **تتبع الاستشارة** (`/consultation/track`) - تتبع الاستشارة

### 10. الحاسبات الطبية (`/calculators`)
- حساب BMI
- موعد التبويض المتوقع
- موعد الولادة المتوقع
- وغيرها

### 11. عن البرنامج (`/about`)
معلومات عن النظام والإصدار

## بيانات التجربة

### حساب الإدارة
- **البريد**: admin@medical.com
- **كلمة المرور**: admin123

### حسابات الأطباء
- **البريد**: ahmed@medical.com (د. أحمد محمد علي)
- **البريد**: fatima@medical.com (د. فاطمة أحمد محمود)
- وغيرهم...

## هيكل قاعدة البيانات

### الجداول الرئيسية

1. **settings** - إعدادات المركز
2. **screens** - الشاشات
3. **clinics** - العيادات
4. **doctors** - الأطباء
5. **patients** - المرضى
6. **queue** - الطوابير
7. **appointments** - المواعيد
8. **consultations** - الاستشارات
9. **complaints** - الشكاوى والاقتراحات
10. **doctor_attendance** - حضور الأطباء
11. **doctor_requests** - طلبات الأطباء
12. **medicines** - الأدوية
13. **tests** - التحاليل
14. **imaging** - الأشعات
15. **health_messages** - الرسائل الصحية

## المكتبات المستخدمة

- **Next.js 14** - إطار العمل الرئيسي
- **React 18** - مكتبة React
- **TypeScript** - لغة البرمجة
- **Tailwind CSS** - تصميم الواجهات
- **Supabase** - قاعدة البيانات والمصادقة
- **Lucide React** - الأيقونات
- **QRCode.react** - توليد رموز QR
- **html2canvas** - تحويل HTML إلى صور
- **jsPDF** - إنشاء ملفات PDF
- **Zustand** - إدارة الحالة
- **date-fns** - معالجة التواريخ
- **react-hot-toast** - الإشعارات

## الميزات المتقدمة

### 1. Realtime Updates
- تحديثات فورية للطوابير
- تحديثات فورية للعيادات
- تحديثات فورية للاستشارات

### 2. النطق الصوتي
- نطق عربي للنداءات
- تشغيل ملفات صوتية متسلسلة
- التحكم في سرعة النطق

### 3. التخزين المؤقت (Caching)
- تخزين الصور والفيديوهات
- تخزين ملفات الصوت
- تحسين الأداء

### 4. الطباعة
- طباعة التذاكر
- طباعة التقارير
- تنسيق A4

### 5. الحاسبات الطبية
- حساب BMI
- موعد التبويض
- موعد الولادة
- وزن مثالي

## الأمان

- ✅ Row Level Security (RLS) في Supabase
- ✅ مصادقة آمنة مع Supabase Auth
- ✅ تشفير كلمات المرور
- ✅ حماية من CSRF
- ✅ معالجة آمنة للبيانات الحساسة

## الأداء

- ✅ تحميل سريع للصفحات
- ✅ تخزين مؤقت للأصول
- ✅ تحديثات فورية بدون تحديث الصفحة
- ✅ تحسين الصور والفيديوهات
- ✅ ضغط البيانات

## الدعم والمساعدة

للمزيد من المعلومات أو الإبلاغ عن مشاكل، يرجى التواصل مع فريق الدعم.

## الترخيص

جميع الحقوق محفوظة © 2025

## ملاحظات مهمة

1. **ملفات الصوت**: تأكد من وجود جميع ملفات الصوت في المجلد `public/audio`
2. **Supabase**: تأكد من تفعيل Realtime في إعدادات Supabase
3. **المتصفح**: استخدم متصفح حديث يدعم Web Audio API
4. **الأداء**: قد تحتاج إلى تحسين الأداء حسب عدد المستخدمين

## التطوير المستقبلي

- [ ] تطبيق موبايل
- [ ] تقارير متقدمة
- [ ] تحليلات البيانات
- [ ] نظام الفواتير
- [ ] نظام الأرشفة
- [ ] نظام الإشعارات المتقدم
